<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Historial - Pacientes</title>
    <style>
        body { font-family: Arial, sans-serif; background:#f2f7ff; margin:0; }
        header { background:#0077b6; color:#fff; padding:16px 24px; display:flex; align-items:center; gap:10px; }
        header h2 { margin:0; }
        main { padding:24px; max-width:960px; margin:0 auto; }
        .toolbar { display:flex; gap:12px; margin-bottom:16px; }
        input[type="text"]{ padding:8px 12px; border-radius:8px; border:1px solid #cbd5e1; width:280px; }
        button, .btn { padding:8px 12px; border-radius:8px; border:1px solid #cbd5e1; background:#fff; cursor:pointer; }
        /* mejoras para <a class="btn"> */
        .btn { text-decoration:none; color:#111; }

        table { width:100%; border-collapse:collapse; background:#fff; border-radius:12px; overflow:hidden; }
        th, td { padding:12px 14px; border-bottom:1px solid #eef2f7; }
        th { background:#e6f2fb; text-align:left; }
        a.link { color:#0077b6; text-decoration:none; font-weight:bold; }
        tr:hover { background:#f8fbff; }

        /* FAB Men√∫ principal */
        .fab-home{
            position:fixed; right:20px; bottom:20px;
            background:#0077b6; color:#fff; border-radius:999px;
            padding:12px 16px; text-decoration:none;
            box-shadow:0 6px 16px rgba(0,0,0,.15); z-index:1000;
        }
    </style>
</head>
<body>
<header>
    <a class="btn" th:href="@{/}">‚Üê Volver</a>
    <h2>Selecciona un paciente</h2>
</header>

<main>
    <form class="toolbar" th:action="@{/historiales/vista}" method="get">
        <input type="text" name="q" placeholder="Buscar por nombre o apellido" th:value="${q}">
        <button type="submit">Buscar</button>
        <a class="btn" th:href="@{/historiales/vista}">Limpiar</a>
    </form>

    <table>
        <thead>
        <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Acci√≥n</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="p : ${pacientes}">
            <td th:text="${(p.apellido?:'') + ', ' + (p.nombre?:'')}">Apellido, Nombre</td>
            <td th:text="${p.correo?:'‚Äî'}">correo@dominio.com</td>
            <td>
                <a class="link" th:href="@{|/historiales/${p.idPaciente}|}">Ver historial</a>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(pacientes)}">
            <td colspan="3">No se encontraron pacientes.</td>
        </tr>
        </tbody>
    </table>
</main>

<!-- FAB Men√∫ principal -->
<a class="fab-home" th:href="@{/}">üè† Men√∫ principal</a>

</body>
</html>
